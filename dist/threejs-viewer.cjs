"use strict";var we=Object.defineProperty;var be=(a,e,t)=>e in a?we(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var n=(a,e,t)=>be(a,typeof e!="symbol"?e+"":e,t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const xe=require("three"),ae=require("three-stdlib"),d=require("react");function Ee(a){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(a){for(const t in a)if(t!=="default"){const s=Object.getOwnPropertyDescriptor(a,t);Object.defineProperty(e,t,s.get?s:{enumerable:!0,get:()=>a[t]})}}return e.default=a,Object.freeze(e)}const h=Ee(xe);class oe{constructor(){n(this,"_scene");n(this,"_isDisposed",!1);this._scene=new h.Scene}get scene(){return this._scene}add(e){if(this._isDisposed)throw new Error("SceneManager has been disposed");this._scene.add(e)}remove(e){if(this._isDisposed)throw new Error("SceneManager has been disposed");this._scene.remove(e)}clear(){if(this._isDisposed)throw new Error("SceneManager has been disposed");for(;this._scene.children.length>0;){const e=this._scene.children[0];e&&(this._disposeObject(e),this._scene.remove(e))}}dispose(){this._isDisposed||(this.clear(),this._scene.background&&(this._scene.background instanceof h.Texture&&this._scene.background.dispose(),this._scene.background=null),this._scene.environment&&(this._scene.environment.dispose(),this._scene.environment=null),this._isDisposed=!0)}_disposeObject(e){for(;e.children.length>0;){const t=e.children[0];t&&(this._disposeObject(t),e.remove(t))}e instanceof h.Mesh&&(e.geometry&&e.geometry.dispose(),e.material&&this._disposeMaterial(e.material)),(e instanceof h.Line||e instanceof h.Points)&&(e.geometry&&e.geometry.dispose(),e.material&&this._disposeMaterial(e.material))}_disposeMaterial(e){Array.isArray(e)?e.forEach(t=>this._disposeSingleMaterial(t)):this._disposeSingleMaterial(e)}_disposeSingleMaterial(e){["map","lightMap","bumpMap","normalMap","specularMap","envMap","alphaMap","aoMap","displacementMap","emissiveMap","gradientMap","metalnessMap","roughnessMap"].forEach(s=>{const r=e[s];r instanceof h.Texture&&r.dispose()}),e.dispose()}}const U={fov:75,near:.01,far:1e4,position:new h.Vector3(0,0,5)};class le{constructor(e){n(this,"_camera");n(this,"_isDisposed",!1);const t=(e==null?void 0:e.fov)??U.fov,s=(e==null?void 0:e.near)??U.near,r=(e==null?void 0:e.far)??U.far,c=(e==null?void 0:e.position)??U.position.clone();this._camera=new h.PerspectiveCamera(t,1,s,r),this._camera.position.copy(c)}get camera(){return this._camera}configure(e){if(this._isDisposed)throw new Error("CameraManager has been disposed");e.fov!==void 0&&(this._camera.fov=e.fov),e.near!==void 0&&(this._camera.near=e.near),e.far!==void 0&&(this._camera.far=e.far),e.position!==void 0&&this._camera.position.copy(e.position),this._camera.updateProjectionMatrix()}setAspect(e){if(this._isDisposed)throw new Error("CameraManager has been disposed");(e<=0||!Number.isFinite(e))&&(console.warn("CameraManager: Invalid aspect ratio provided, using 1"),e=1),this._camera.aspect=e,this._camera.updateProjectionMatrix()}lookAt(e){if(this._isDisposed)throw new Error("CameraManager has been disposed");this._camera.lookAt(e)}dispose(){this._isDisposed||(this._isDisposed=!0)}}const te={antialias:!0,alpha:!1};class ce{constructor(){n(this,"_renderer",null);n(this,"_container",null);n(this,"_isDisposed",!1);n(this,"_isInitialized",!1)}get renderer(){if(!this._renderer)throw new Error("RenderManager has not been initialized. Call initialize() first.");return this._renderer}initialize(e,t){if(this._isDisposed)throw new Error("RenderManager has been disposed");if(this._isInitialized)throw new Error("RenderManager has already been initialized");const s=(t==null?void 0:t.antialias)??te.antialias,r=(t==null?void 0:t.alpha)??te.alpha;this._renderer=new h.WebGLRenderer({antialias:s,alpha:r}),this._renderer.setPixelRatio(window.devicePixelRatio);const c=e.clientWidth||1,p=e.clientHeight||1;this._renderer.setSize(c,p),e.appendChild(this._renderer.domElement),this._container=e,this._isInitialized=!0}setSize(e,t){if(this._isDisposed)throw new Error("RenderManager has been disposed");if(!this._renderer)throw new Error("RenderManager has not been initialized. Call initialize() first.");const s=Math.max(1,Math.floor(e)),r=Math.max(1,Math.floor(t));this._renderer.setSize(s,r)}render(e,t){if(this._isDisposed)throw new Error("RenderManager has been disposed");if(!this._renderer)throw new Error("RenderManager has not been initialized. Call initialize() first.");this._renderer.render(e,t)}dispose(){this._isDisposed||(this._renderer&&(this._container&&this._renderer.domElement.parentElement===this._container&&this._container.removeChild(this._renderer.domElement),this._renderer.dispose(),this._renderer=null),this._container=null,this._isInitialized=!1,this._isDisposed=!0)}}class de{constructor(){n(this,"_plugins",new Map);n(this,"_context",null);n(this,"_isDisposed",!1)}setContext(e){if(this._isDisposed)throw new Error("PluginSystem has been disposed");this._context=e}getContext(){return this._context}register(e){if(this._isDisposed)throw new Error("PluginSystem has been disposed");if(!this._context)throw new Error("Plugin context has not been set. Call setContext() before registering plugins.");if(this._plugins.has(e.name))throw new Error(`Plugin "${e.name}" is already registered`);e.initialize(this._context),this._plugins.set(e.name,e)}unregister(e){if(this._isDisposed)throw new Error("PluginSystem has been disposed");const t=this._plugins.get(e);t&&(t.dispose(),this._plugins.delete(e))}get(e){return this._plugins.get(e)}has(e){return this._plugins.has(e)}getPluginNames(){return Array.from(this._plugins.keys())}get pluginCount(){return this._plugins.size}updateAll(e){if(this._isDisposed)throw new Error("PluginSystem has been disposed");for(const t of this._plugins.values())if(t.update)try{t.update(e)}catch(s){console.error(`Error updating plugin "${t.name}":`,s)}}disposeAll(){if(!this._isDisposed){for(const e of this._plugins.values())try{e.dispose()}catch(t){console.error(`Error disposing plugin "${e.name}":`,t)}this._plugins.clear(),this._context=null,this._isDisposed=!0}}}class ue{constructor(){n(this,"_sceneManager");n(this,"_cameraManager");n(this,"_renderManager");n(this,"_pluginSystem");n(this,"_container",null);n(this,"_isInitialized",!1);n(this,"_isRunning",!1);n(this,"_isDisposed",!1);n(this,"_animationFrameId",null);n(this,"_lastTime",0);n(this,"_renderLoop",()=>{if(!this._isRunning||this._isDisposed)return;const e=performance.now(),t=(e-this._lastTime)/1e3;this._lastTime=e,this._pluginSystem.updateAll(t),this._renderManager.render(this._sceneManager.scene,this._cameraManager.camera),this._animationFrameId=requestAnimationFrame(this._renderLoop)});this._sceneManager=new oe,this._cameraManager=new le,this._renderManager=new ce,this._pluginSystem=new de}get scene(){return this._sceneManager}get camera(){return this._cameraManager}get renderer(){return this._renderManager}get plugins(){return this._pluginSystem}get isRunning(){return this._isRunning}get isInitialized(){return this._isInitialized}get container(){return this._container}initialize(e){if(this._isDisposed)throw new Error("ViewerCore has been disposed");if(this._isInitialized)throw new Error("ViewerCore has already been initialized");const{container:t,antialias:s,alpha:r,cameraConfig:c}=e;this._container=t,c&&this._cameraManager.configure(c);const p={};s!==void 0&&(p.antialias=s),r!==void 0&&(p.alpha=r),this._renderManager.initialize(t,p);const w=t.clientWidth||1,T=t.clientHeight||1;this._cameraManager.setAspect(w/T),this._setupDefaultLighting();const g={scene:this._sceneManager.scene,camera:this._cameraManager.camera,renderer:this._renderManager.renderer,container:t};this._pluginSystem.setContext(g),this._isInitialized=!0}start(){if(this._isDisposed)throw new Error("ViewerCore has been disposed");if(!this._isInitialized)throw new Error("ViewerCore has not been initialized. Call initialize() first.");this._isRunning||(this._isRunning=!0,this._lastTime=performance.now(),this._renderLoop())}stop(){if(this._isDisposed)throw new Error("ViewerCore has been disposed");this._isRunning=!1,this._animationFrameId!==null&&(cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null)}resize(e,t){if(this._isDisposed)throw new Error("ViewerCore has been disposed");if(!this._isInitialized)throw new Error("ViewerCore has not been initialized. Call initialize() first.");const s=Math.max(1,e),r=Math.max(1,t);this._cameraManager.setAspect(s/r),this._renderManager.setSize(s,r)}dispose(){this._isDisposed||(this.stop(),this._pluginSystem.disposeAll(),this._renderManager.dispose(),this._sceneManager.dispose(),this._cameraManager.dispose(),this._container=null,this._isInitialized=!1,this._isDisposed=!0)}_setupDefaultLighting(){const e=this._sceneManager.scene,t=new h.AmbientLight(16777215,.5);e.add(t);const s=new h.DirectionalLight(16777215,1);s.position.set(5,10,7.5),e.add(s);const r=new h.DirectionalLight(16777215,.5);r.position.set(-5,5,-5),e.add(r);const c=new h.HemisphereLight(16777215,4473924,.5);c.position.set(0,20,0),e.add(c)}}class he{constructor(){n(this,"name","ModelLoaderPlugin");n(this,"_context",null);n(this,"_loader");n(this,"_currentModel",null);n(this,"_boundingBox",null);n(this,"_center",null);n(this,"_loadingState",{isLoading:!1,progress:0,error:null});n(this,"_isDisposed",!1);this._loader=new ae.GLTFLoader}get loadingState(){return{...this._loadingState}}initialize(e){if(this._isDisposed)throw new Error("ModelLoaderPlugin has been disposed");this._context=e}async load(e){if(this._isDisposed)throw new Error("ModelLoaderPlugin has been disposed");if(!this._context)throw new Error("ModelLoaderPlugin has not been initialized. Call initialize() first.");this._currentModel&&this.unload(),this._loadingState={isLoading:!0,progress:0,error:null};try{const s=(await this._loadGLTF(e)).scene;this._context.scene.add(s),this._currentModel=s;const r=new h.Box3().setFromObject(s),c=new h.Vector3;return r.getCenter(c),this._boundingBox=r,this._center=c,this._loadingState={isLoading:!1,progress:100,error:null},{model:s,boundingBox:r,center:c}}catch(t){const s=t instanceof Error?t:new Error(`Failed to load model from URL: ${e}`);throw this._loadingState={isLoading:!1,progress:0,error:s},s}}unload(){this._currentModel&&this._context&&(this._context.scene.remove(this._currentModel),this._disposeObject(this._currentModel),this._currentModel=null,this._boundingBox=null,this._center=null)}getCenter(){return this._center?this._center.clone():null}getBoundingBox(){return this._boundingBox?this._boundingBox.clone():null}dispose(){this._isDisposed||(this.unload(),this._context=null,this._isDisposed=!0)}_loadGLTF(e){return new Promise((t,s)=>{this._loader.load(e,r=>{t(r)},r=>{if(r.lengthComputable){const c=r.loaded/r.total*100;this._loadingState={...this._loadingState,progress:Math.round(c)}}},r=>{const c=r instanceof Error?r.message:`Failed to load model from URL: ${e}`;s(new Error(c))})})}_disposeObject(e){for(;e.children.length>0;){const t=e.children[0];t&&(this._disposeObject(t),e.remove(t))}e instanceof h.Mesh&&(e.geometry&&e.geometry.dispose(),e.material&&this._disposeMaterial(e.material)),(e instanceof h.Line||e instanceof h.Points)&&(e.geometry&&e.geometry.dispose(),e.material&&this._disposeMaterial(e.material)),e instanceof h.SkinnedMesh&&e.skeleton&&e.skeleton.dispose()}_disposeMaterial(e){Array.isArray(e)?e.forEach(t=>this._disposeSingleMaterial(t)):this._disposeSingleMaterial(e)}_disposeSingleMaterial(e){["map","lightMap","bumpMap","normalMap","specularMap","envMap","alphaMap","aoMap","displacementMap","emissiveMap","gradientMap","metalnessMap","roughnessMap","clearcoatMap","clearcoatNormalMap","clearcoatRoughnessMap","transmissionMap","thicknessMap","sheenColorMap","sheenRoughnessMap"].forEach(s=>{const r=e[s];r instanceof h.Texture&&r.dispose()}),e.dispose()}}class _e{constructor(){n(this,"name","OrbitControlsPlugin");n(this,"_context",null);n(this,"_controls",null);n(this,"_isDisposed",!1);n(this,"_initialTarget",new h.Vector3(0,0,0));n(this,"_initialCameraPosition",new h.Vector3(0,0,5));n(this,"_initialMinDistance",.1);n(this,"_initialMaxDistance",1e4)}get controls(){if(!this._controls)throw new Error("OrbitControlsPlugin has not been initialized. Call initialize() first.");return this._controls}initialize(e){if(this._isDisposed)throw new Error("OrbitControlsPlugin has been disposed");this._context=e,this._controls=new ae.OrbitControls(e.camera,e.container),this._initialCameraPosition.copy(e.camera.position),this._controls.minDistance=this._initialMinDistance,this._controls.maxDistance=this._initialMaxDistance,this._controls.enableDamping=!0,this._controls.dampingFactor=.05,this._controls.enablePan=!0,this._controls.enableRotate=!0,this._controls.enableZoom=!0}configure(e){if(this._isDisposed)throw new Error("OrbitControlsPlugin has been disposed");if(!this._controls)throw new Error("OrbitControlsPlugin has not been initialized. Call initialize() first.");e.target!==void 0&&(this._controls.target.copy(e.target),this._initialTarget.copy(e.target)),e.minDistance!==void 0&&(this._controls.minDistance=e.minDistance,this._initialMinDistance=e.minDistance),e.maxDistance!==void 0&&(this._controls.maxDistance=e.maxDistance,this._initialMaxDistance=e.maxDistance),e.enableDamping!==void 0&&(this._controls.enableDamping=e.enableDamping),e.dampingFactor!==void 0&&(this._controls.dampingFactor=e.dampingFactor),e.enablePan!==void 0&&(this._controls.enablePan=e.enablePan),e.enableRotate!==void 0&&(this._controls.enableRotate=e.enableRotate),e.enableZoom!==void 0&&(this._controls.enableZoom=e.enableZoom),this._controls.update()}setTarget(e){if(this._isDisposed)throw new Error("OrbitControlsPlugin has been disposed");if(!this._controls)throw new Error("OrbitControlsPlugin has not been initialized. Call initialize() first.");this._controls.target.copy(e),this._initialTarget.copy(e),this._controls.update()}setZoomLimits(e,t){if(this._isDisposed)throw new Error("OrbitControlsPlugin has been disposed");if(!this._controls)throw new Error("OrbitControlsPlugin has not been initialized. Call initialize() first.");if(e>t)throw new Error("Minimum zoom distance cannot be greater than maximum zoom distance");if(e<0)throw new Error("Minimum zoom distance cannot be negative");this._controls.minDistance=e,this._controls.maxDistance=t,this._initialMinDistance=e,this._initialMaxDistance=t,this._controls.update()}reset(){if(this._isDisposed)throw new Error("OrbitControlsPlugin has been disposed");if(!this._controls||!this._context)throw new Error("OrbitControlsPlugin has not been initialized. Call initialize() first.");this._controls.target.copy(this._initialTarget),this._context.camera.position.copy(this._initialCameraPosition),this._controls.minDistance=this._initialMinDistance,this._controls.maxDistance=this._initialMaxDistance,this._controls.update()}update(e){this._isDisposed||!this._controls||this._controls.update()}dispose(){this._isDisposed||(this._controls&&(this._controls.dispose(),this._controls=null),this._context=null,this._isDisposed=!0)}}class pe{constructor(){n(this,"name","GridHelperPlugin");n(this,"_context",null);n(this,"_gridHelper",null);n(this,"_axesHelper",null);n(this,"_isDisposed",!1);n(this,"_config",{size:10,divisions:10,colorCenterLine:4473924,colorGrid:8947848,plane:"XZ",showAxes:!0,axesSize:5})}initialize(e){if(this._isDisposed)throw new Error("GridHelperPlugin has been disposed");this._context=e,this._createGrid(),this._createAxes()}_createGrid(){this._context&&(this._gridHelper&&(this._context.scene.remove(this._gridHelper),this._gridHelper.dispose()),this._gridHelper=new h.GridHelper(this._config.size,this._config.divisions,this._config.colorCenterLine,this._config.colorGrid),this._applyPlaneRotation(),this._context.scene.add(this._gridHelper))}_createAxes(){this._context&&(this._axesHelper&&(this._context.scene.remove(this._axesHelper),this._axesHelper.dispose()),this._config.showAxes&&(this._axesHelper=new h.AxesHelper(this._config.axesSize),this._context.scene.add(this._axesHelper)))}_applyPlaneRotation(){if(this._gridHelper)switch(this._gridHelper.rotation.set(0,0,0),this._config.plane){case"XY":this._gridHelper.rotation.x=Math.PI/2;break;case"YZ":this._gridHelper.rotation.z=Math.PI/2;break}}configure(e){if(this._isDisposed)throw new Error("GridHelperPlugin has been disposed");e.size!==void 0&&(this._config.size=e.size),e.divisions!==void 0&&(this._config.divisions=e.divisions),e.colorCenterLine!==void 0&&(this._config.colorCenterLine=e.colorCenterLine),e.colorGrid!==void 0&&(this._config.colorGrid=e.colorGrid),e.plane!==void 0&&(this._config.plane=e.plane),e.showAxes!==void 0&&(this._config.showAxes=e.showAxes),e.axesSize!==void 0&&(this._config.axesSize=e.axesSize),this._createGrid(),this._createAxes()}setVisible(e){this._gridHelper&&(this._gridHelper.visible=e),this._axesHelper&&(this._axesHelper.visible=e)}setPlane(e){this._config.plane=e,this._applyPlaneRotation()}setAxesVisible(e){this._config.showAxes=e,this._createAxes()}update(e){}dispose(){this._isDisposed||(this._gridHelper&&this._context&&(this._context.scene.remove(this._gridHelper),this._gridHelper.dispose(),this._gridHelper=null),this._axesHelper&&this._context&&(this._context.scene.remove(this._axesHelper),this._axesHelper.dispose(),this._axesHelper=null),this._context=null,this._isDisposed=!0)}}var Z={exports:{}},G={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var re;function Me(){if(re)return G;re=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,c){var p=null;if(c!==void 0&&(p=""+c),r.key!==void 0&&(p=""+r.key),"key"in r){c={};for(var w in r)w!=="key"&&(c[w]=r[w])}else c=r;return r=c.ref,{$$typeof:a,type:s,key:p,ref:r!==void 0?r:null,props:c}}return G.Fragment=e,G.jsx=t,G.jsxs=t,G}var j={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var se;function ve(){return se||(se=1,process.env.NODE_ENV!=="production"&&(function(){function a(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===v?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case P:return"Fragment";case W:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case M:return"SuspenseList";case u:return"Activity"}if(typeof i=="object")switch(typeof i.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),i.$$typeof){case S:return"Portal";case B:return i.displayName||"Context";case J:return(i._context.displayName||"Context")+".Consumer";case k:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return o=i.displayName||null,o!==null?o:a(i.type)||"Memo";case l:o=i._payload,i=i._init;try{return a(i(o))}catch{}}return null}function e(i){return""+i}function t(i){try{e(i);var o=!1}catch{o=!0}if(o){o=console;var _=o.error,f=typeof Symbol=="function"&&Symbol.toStringTag&&i[Symbol.toStringTag]||i.constructor.name||"Object";return _.call(o,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",f),e(i)}}function s(i){if(i===P)return"<>";if(typeof i=="object"&&i!==null&&i.$$typeof===l)return"<...>";try{var o=a(i);return o?"<"+o+">":"<...>"}catch{return"<...>"}}function r(){var i=R.A;return i===null?null:i.getOwner()}function c(){return Error("react-stack-top-frame")}function p(i){if(b.call(i,"key")){var o=Object.getOwnPropertyDescriptor(i,"key").get;if(o&&o.isReactWarning)return!1}return i.key!==void 0}function w(i,o){function _(){D||(D=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",o))}_.isReactWarning=!0,Object.defineProperty(i,"key",{get:_,configurable:!0})}function T(){var i=a(this.type);return V[i]||(V[i]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),i=this.props.ref,i!==void 0?i:null}function g(i,o,_,f,q,Q){var m=_.ref;return i={$$typeof:O,type:i,key:o,props:_,_owner:f},(m!==void 0?m:null)!==null?Object.defineProperty(i,"ref",{enumerable:!1,get:T}):Object.defineProperty(i,"ref",{enumerable:!1,value:null}),i._store={},Object.defineProperty(i._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(i,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(i,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:q}),Object.defineProperty(i,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:Q}),Object.freeze&&(Object.freeze(i.props),Object.freeze(i)),i}function y(i,o,_,f,q,Q){var m=o.children;if(m!==void 0)if(f)if(z(m)){for(f=0;f<m.length;f++)$(m[f]);Object.freeze&&Object.freeze(m)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else $(m);if(b.call(o,"key")){m=a(i);var L=Object.keys(o).filter(function(ge){return ge!=="key"});f=0<L.length?"{key: someKey, "+L.join(": ..., ")+": ...}":"{key: someKey}",H[m+f]||(L=0<L.length?"{"+L.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,f,m,L,m),H[m+f]=!0)}if(m=null,_!==void 0&&(t(_),m=""+_),p(o)&&(t(o.key),m=""+o.key),"key"in o){_={};for(var K in o)K!=="key"&&(_[K]=o[K])}else _=o;return m&&w(_,typeof i=="function"?i.displayName||i.name||"Unknown":i),g(i,m,_,r(),q,Q)}function $(i){A(i)?i._store&&(i._store.validated=1):typeof i=="object"&&i!==null&&i.$$typeof===l&&(i._payload.status==="fulfilled"?A(i._payload.value)&&i._payload.value._store&&(i._payload.value._store.validated=1):i._store&&(i._store.validated=1))}function A(i){return typeof i=="object"&&i!==null&&i.$$typeof===O}var E=d,O=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),B=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),l=Symbol.for("react.lazy"),u=Symbol.for("react.activity"),v=Symbol.for("react.client.reference"),R=E.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,b=Object.prototype.hasOwnProperty,z=Array.isArray,x=console.createTask?console.createTask:function(){return null};E={react_stack_bottom_frame:function(i){return i()}};var D,V={},N=E.react_stack_bottom_frame.bind(E,c)(),F=x(s(c)),H={};j.Fragment=P,j.jsx=function(i,o,_){var f=1e4>R.recentlyCreatedOwnerStacks++;return y(i,o,_,!1,f?Error("react-stack-top-frame"):N,f?x(s(i)):F)},j.jsxs=function(i,o,_){var f=1e4>R.recentlyCreatedOwnerStacks++;return y(i,o,_,!0,f?Error("react-stack-top-frame"):N,f?x(s(i)):F)}})()),j}var ne;function Re(){return ne||(ne=1,process.env.NODE_ENV==="production"?Z.exports=Me():Z.exports=ve()),Z.exports}var ee=Re();const ie=d.createContext(void 0);ie.displayName="ThreeInstanceContext";const Y={scene:null,camera:null,renderer:null,container:null,isReady:!1,isDisposed:!1},De={unmounted:["mounted"],mounted:["initialized","disposed"],initialized:["disposed"],disposed:[]},Te={unmounted:!1,mounted:!1,initialized:!0,disposed:!1};function ye(a,e){return De[a].includes(e)}function Pe(a,e){const t=Te[e];return e==="disposed"?{...Y,isDisposed:!0}:!t||!a||!a.isInitialized?Y:{scene:a.scene.scene,camera:a.camera.camera,renderer:a.renderer.renderer,container:a.container,isReady:!0,isDisposed:!1}}function fe({children:a,viewerCore:e}){const[t,s]=d.useState("unmounted"),r=d.useRef(!1),c=d.useRef(null),p=d.useCallback(g=>{s(y=>ye(y,g)?g:y)},[]);d.useEffect(()=>(r.current=!0,p("mounted"),()=>{r.current=!1,s(g=>g!=="disposed"?"disposed":g)}),[p]),d.useEffect(()=>{const g=c.current;if(c.current=e,g&&!e){p("disposed");return}e&&e.isInitialized&&p("initialized")},[e,p]);const w=d.useCallback(()=>{e&&e.isInitialized&&t==="mounted"&&p("initialized")},[e,t,p]);d.useEffect(()=>{if(!e||t!=="mounted")return;w();const g=setInterval(w,50),y=setTimeout(()=>{clearInterval(g)},5e3);return()=>{clearInterval(g),clearTimeout(y)}},[e,t,w]);const T=d.useMemo(()=>Pe(e,t),[e,t]);return ee.jsx(ie.Provider,{value:T,children:a})}fe.displayName="ThreeInstanceProvider";const me=d.forwardRef(function({modelUrl:e,pivotPoint:t,zoomLimits:s,grid:r,className:c,style:p,onLoad:w,onError:T,onLoadingChange:g,children:y},$){const A=d.useRef(null),E=d.useRef(null),O=d.useRef(null),S=d.useRef(null),P=d.useRef(null),[C,W]=d.useState(!1),[J,B]=d.useState(null),k=d.useRef(w),I=d.useRef(T),M=d.useRef(g);d.useEffect(()=>{k.current=w},[w]),d.useEffect(()=>{I.current=T},[T]),d.useEffect(()=>{M.current=g},[g]),d.useImperativeHandle($,()=>({getInstances(){if(C)return{...Y,isDisposed:!0};const l=E.current;return!l||!l.isInitialized?Y:{scene:l.scene.scene,camera:l.camera.camera,renderer:l.renderer.renderer,container:l.container,isReady:!0,isDisposed:!1}},getViewerCore(){return C?null:E.current},isReady(){if(C)return!1;const l=E.current;return l!==null&&l.isInitialized},isDisposed(){return C}}),[C]),d.useEffect(()=>{const l=A.current;if(!l)return;const u=new ue;u.initialize({container:l,antialias:!0,alpha:!0});const v=new he,R=new _e,b=new pe;return u.plugins.register(v),u.plugins.register(R),u.plugins.register(b),E.current=u,O.current=v,S.current=R,P.current=b,B(u),W(!1),u.start(),()=>{u.dispose(),E.current=null,O.current=null,S.current=null,P.current=null,B(null),W(!0)}},[]),d.useEffect(()=>{const l=A.current,u=E.current;if(!l||!u)return;const v=new ResizeObserver(R=>{for(const b of R){const{width:z,height:x}=b.contentRect;z>0&&x>0&&u.resize(z,x)}});return v.observe(l),()=>{v.disconnect()}},[]),d.useEffect(()=>{var R;const l=O.current,u=S.current,v=P.current;if(l){if(!e){l.unload();return}(R=M.current)==null||R.call(M,!0),l.load(e).then(b=>{var V,N,F;(V=M.current)==null||V.call(M,!1),u&&!t&&u.setTarget(b.center);const z=b.boundingBox,x=new h.Vector3;z.getSize(x);const D=Math.max(x.x,x.y,x.z);if(u&&!s){const H=((N=E.current)==null?void 0:N.camera.camera.far)??1e3,i=Math.min(D*10,H*.9);u.setZoomLimits(D*.1,i)}if(v&&(!r||r.size===void 0)){const H=D*3;v.configure({size:H,divisions:10,axesSize:D*1.5})}(F=k.current)==null||F.call(k,b)}).catch(b=>{var x,D;(x=M.current)==null||x.call(M,!1);const z=b instanceof Error?b:new Error(String(b));(D=I.current)==null||D.call(I,z)})}},[e]),d.useEffect(()=>{const l=S.current;if(l&&t){const u=new h.Vector3(t.x,t.y,t.z);l.setTarget(u)}},[t]),d.useEffect(()=>{const l=S.current;if(l&&s){const u=s.min??.1,v=s.max??1e4;l.setZoomLimits(u,v)}},[s]),d.useEffect(()=>{const l=P.current;if(l)if(r){const u={};r.size!==void 0&&(u.size=r.size),r.divisions!==void 0&&(u.divisions=r.divisions),r.plane!==void 0&&(u.plane=r.plane),r.showAxes!==void 0&&(u.showAxes=r.showAxes),l.configure(u),l.setVisible(r.visible!==!1)}else l.setVisible(!1)},[r]);const X={width:"100%",height:"100%",...p};return ee.jsxs(fe,{viewerCore:J,children:[ee.jsx("div",{ref:A,className:c,style:X}),y]})});me.displayName="ThreeViewer";function ze(){const a=d.useContext(ie);if(a===void 0)throw new Error("useThreeInstance must be used within a ThreeViewer component. Make sure your component is a child of <ThreeViewer>.");return a}exports.CameraManager=le;exports.GridHelperPlugin=pe;exports.ModelLoaderPlugin=he;exports.OrbitControlsPlugin=_e;exports.PluginSystem=de;exports.RenderManager=ce;exports.SceneManager=oe;exports.ThreeViewer=me;exports.ViewerCore=ue;exports.useThreeInstance=ze;
//# sourceMappingURL=threejs-viewer.cjs.map
